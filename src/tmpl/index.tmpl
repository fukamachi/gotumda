<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Welcome to Gotumda!</title>
  <link rel="stylesheet" href="/public/static/css/main.css" type="text/css" media="screen, tv, print" charset="UTF-8" />
  <script type="text/javascript" src="/public/static/js/closure-library/closure/goog/base.js"></script>
  <script type="text/javascript" src="/public/static/js/deps.js"></script>
  <script type="text/javascript" src="/public/static/js/require.js"></script>
</head>
<body>
<h1>Gotumda!</h1>

<h2>All Tasks</h2>

<div id="got-all-tasks">
Loading..
</div>

<script type="text/javascript">
  var app = new got.App('<% (format t
                                    "http://~A:~A/"
                                    (caveman:config :domain)
                                    (caveman:config :port)) %>');
  app.allTasks(function(tasks) {
    var element = goog.dom.getElement('got-all-tasks');
    element.innerHTML = '';
    goog.array.forEach(tasks, function(task) {
      task.render(element);
    });
    var dlg = new goog.fx.DragListGroup();
    dlg.addDragList(element,
        goog.fx.DragListDirection.DOWN);
    dlg.setDragItemHoverClass('cursor-move');
    dlg.setDraggerElClass('cursor-move');
    dlg.setFunctionToGetHandleForDragItem(
      function(item) {
        return goog.dom.getElementByClass('got-taskitem-body', item);
      }
    );
    dlg.init();
  });
</script>
</body>
</html>
